---
title: Alist增加退出按钮
tags:
  - Alist
categories:
  - 技术/软件
date: 2025-02-16 15:14:37
author: 陈小可
excerpt: Alist通过自定义头部形式增加一个退出按钮
---

## 自定义头部
```js
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // 创建一个新的按钮元素
    var newButton = document.createElement('button');
    // 设置按钮的类名
    newButton.className = 'custom-header-button';

    // 创建SVG图标
    var svgNS = "http://www.w3.org/2000/svg"; // SVG命名空间
    var svgIcon = document.createElementNS(svgNS, "svg");
    svgIcon.setAttribute("viewBox", "0 0 24 24");
    svgIcon.setAttribute("height", "24");
    svgIcon.setAttribute("width", "24");

    // 创建SVG路径（这里只是一个示例路径，应根据实际图标进行修改）
    var path = document.createElementNS(svgNS, "path");
    path.setAttribute("d", "M10 3H6a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h4v-2H6V5h4v2h2V5a2 2 0 0 0-2-2zm4 8v10c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V11c0-.6.4-1 1-1h6c.6 0 1 .4 1 1zm-2 5v-1h2v1h-2z");
    svgIcon.appendChild(path);

    // 将SVG图标添加到按钮中
    newButton.appendChild(svgIcon);

    // 设置按钮的点击事件处理函数
    newButton.onclick = function() {
    localStorage.clear()
    // 跳转到指定的URL
    window.location.href = 'http://127.0.0.1:5244/@login?redirect=%2Flogin';
  };


    // 设置鼠标悬停时的提示
    newButton.title = '退出登录';

    // 尝试获取目标<div>元素
    var targetDiv = document.querySelector('.left-toolbar-in');

    // 如果目标元素存在，则直接添加按钮
    if (targetDiv) {
      targetDiv.appendChild(newButton);
    } else {
      // 如果目标元素不存在，则使用MutationObserver来监听DOM变化
      var observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.addedNodes.length) {
            targetDiv = document.querySelector('.left-toolbar-in');
            if (targetDiv) {
              targetDiv.appendChild(newButton);
              observer.disconnect(); // 停止观察
            }
          }
        });
      });

      // 配置观察选项
      var config = { childList: true, subtree: true };

      // 选择目标节点
      var targetNode = document.body;

      // 调用观察者的observe()方法
      observer.observe(targetNode, config);
    }
  });
</script>

```
